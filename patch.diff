*** Begin Patch
*** Update File: src/FileCabinet/SuiteScripts/rest1NewVersion.js
@@
-define(['N/search', './SDB-Enlamano-score.js', 'N/runtime', './ELM_Aux_Lib.js', 'N/record'],
-function (search, scoreLib, runtime, auxLib, record) {
+define(['N/search', './SDB-Enlamano-score.js', 'N/runtime', './ELM_Aux_Lib.js', 'N/record', './ELM_SCORE_BCU_LIB.js'],
+function (search, scoreLib, runtime, auxLib, record, bcuScoreLib) {
@@
-          const score = scoreLib.scoreFinal(docNumber);
+          // Usar motor bcuScore optimizado con fallback al SDB clásico
+          let score;
+          try {
+            score = bcuScoreLib.scoreFinal(docNumber, { provider: 'mym', forceRefresh: true, strictRules: true, debug: false });
+          } catch (e) {
+            // Fallback al motor antiguo si algo falla
+            score = scoreLib.scoreFinal(docNumber);
+          }
*** End Patch
